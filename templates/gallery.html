{% extends 'base.html' %}
{% block content %}
<div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="fw-bold display-5 text-dark">MoreVistas Experiences</h1>
        <p class="text-muted">Unlock the beauty of our premium stays</p>
    </div>

    <div class="d-flex justify-content-center flex-wrap gap-2 mb-5">
        <button class="f-btn active" onclick="filterGallery('all', this)">All Highlights</button>
        <button class="f-btn" onclick="filterGallery('pool', this)">Private Pools</button>
        <button class="f-btn" onclick="filterGallery('bedroom', this)">Bedrooms</button>
        <button class="f-btn" onclick="filterGallery('hall', this)">Living Area</button>
    </div>

    <div class="row g-4" id="gallery-grid">
        {% for villa in villas %}
            {% for key in ['Image_Main', 'Image_2', 'Image_3'] %}
                {% if villa[key] %}
                <div class="col-lg-4 col-md-6 gallery-item {{ villa.Category | lower | replace(' ', '') }}">
                    <div class="premium-box" onclick="openFullScreen('{{ villa[key] }}')">
                        <img src="{{ villa[key] }}" class="img-fluid">
                        <div class="premium-overlay">
                            <div class="content text-center">
                                <span class="badge bg-warning text-dark mb-1">{{ villa.Category }}</span>
                                <h6 class="text-white mb-0">{{ villa.Name }}</h6>
                                <i class="bi bi-plus-circle text-white fs-2 mt-2"></i>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
            {% endfor %}
        {% endfor %}
    </div>
</div>

<div id="fullScreenModal" class="fullscreen-modal" onclick="closeFullScreen()">
    <span class="close-btn">&times;</span>
    <img class="modal-content" id="fullImg">
</div>

<style>
    .f-btn { background: #fff; border: 1px solid #ddd; padding: 8px 20px; border-radius: 50px; transition: 0.3s; }
    .f-btn.active, .f-btn:hover { background: #0f172a; color: #fbbf24; border-color: #0f172a; }

    .premium-box { position: relative; border-radius: 15px; overflow: hidden; height: 320px; cursor: pointer; }
    .premium-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.6s; }
    .premium-box:hover img { transform: scale(1.1); filter: blur(3px); }

    .premium-overlay {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(15, 23, 42, 0.6); display: flex; align-items: center;
        justify-content: center; opacity: 0; transition: 0.4s;
    }
    .premium-box:hover .premium-overlay { opacity: 1; }

    .fullscreen-modal { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); align-items: center; justify-content: center; }
    .modal-content { max-width: 90%; max-height: 90%; border-radius: 10px; }
    .close-btn { position: absolute; top: 20px; right: 35px; color: #fff; font-size: 40px; cursor: pointer; }
</style>

<script>
    function filterGallery(cat, btn) {
        document.querySelectorAll('.f-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.querySelectorAll('.gallery-item').forEach(item => {
            item.style.display = (cat === 'all' || item.classList.contains(cat)) ? 'block' : 'none';
        });
    }
    function openFullScreen(src) { document.getElementById("fullImg").src = src; document.getElementById("fullScreenModal").style.display = "flex"; }
    function closeFullScreen() { document.getElementById("fullScreenModal").style.display = "none"; }
</script>
{% endblock %}
